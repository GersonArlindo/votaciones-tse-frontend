<nav class="page-breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a routerLink="/dashboard">Dashboard</a></li>
      <li class="breadcrumb-item active" aria-current="page">Leads</li>
    </ol>
</nav>

<div class="row">
  <div class="col-md-12 stretch-card">
    <div class="card">
      <div class="headercard">
        <h5 id="_title-header-h5">Leads List</h5>
        <div class="btn-text-right headercard"></div>
      </div>
      <div class="card-body">
        <div class="table-responsive table table-hover mb-0">
          <p-table #dt class="data-config-header" [value]="leads" dataKey="id" [rowHover]="true" [rows]="10"
            [showCurrentPageReport]="true" [paginator]="true"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
            [globalFilterFields]="['lead_id ','first_name','last_name','state','date_create','date_modify','outcome']">
    
              <ng-template pTemplate="caption">
                <div class="table-header">
                  Search Leads
                  <span class="p-input-icon-left">
                    <div class="btn-text-right">
                      <input pInputText type="text" class="form-control" id="_bck-color"(input)="applyFilterGlobal($event, 'contains')" />
                    </div>
                  </span>
                </div>
              </ng-template>

              <ng-template pTemplate="header">
                <tr>  
                 <!--<th pSortableColumn="lead_id" style="min-width: 8rem">
                        <div class="flex justify-content-between align-items-center">
                          Id
                          <p-sortIcon field="lead_id"></p-sortIcon>
                        </div>
                      </th> -->
                      
                  <th pSortableColumn="first_name" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      Name
                      <p-sortIcon field="first_name"></p-sortIcon>
                    </div>
                  </th>                                         

                  <th pSortableColumn="phone_number" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      Phone 
                      <p-sortIcon field="phone_number"></p-sortIcon>
                    </div>
                  </th>

                  <th pSortableColumn="email" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      Email 
                      <p-sortIcon field="phone_number"></p-sortIcon>
                    </div>
                  </th>

                  <th pSortableColumn="state" style="min-width: 14rem">
                    <div class="flex justify-content-between align-items-center">
                      State
                      <p-sortIcon field="state"></p-sortIcon>
                    </div>
                  </th>

                      <th pSortableColumn="st_address" style="min-width: 14rem">
                        <div class="flex justify-content-between align-items-center">
                          Address
                          <p-sortIcon field="state"></p-sortIcon>
                        </div>
                      </th>

                  <th pSortableColumn="outcome" style="min-width: 10rem">
                    <div class="flex justify-content-between align-items-center">
                      Outcome
                    </div>
                  </th>
                    
                  <th style="min-width: 09rem">
                    <div class="flex justify-content-between align-items-center">
                      Actions
                    </div>
                  </th>
                </tr>
              </ng-template>

              <ng-template pTemplate="body" let-leads>
                <tr class="p-selectable-row">
                     <!--  <td>
                        <span class="rounded-pill">&nbsp; {{leads.lead_id}} &nbsp;</span>
                      </td> -->
                      <td>
                        <i class="mdi mdi-account-circle"></i>
                        {{leads.first_name}} {{leads.last_name}}
                      </td>  
                      <td>
                        <i class="mdi mdi-phone"></i> {{leads.phone_number | mask: '(000) 000-0000'}}
                      </td> 
                      <td>
                        <a href="mailto:{{leads.email}}"><i class="mdi mdi-email"></i></a>
                         {{leads.email}}
                      </td> 
                      <td>
                        <i class="mdi mdi-map-marker-radius"></i>
                        {{leads.state}}
                      </td>  
                      <td>
                        <a href="https://www.google.com/maps?q={{leads.st_address}}" target="_blank"><i class="mdi mdi-map-marker-radius"></i></a>
                        {{leads.st_address}}
                      </td>  
                      <td>
                        <span
                          class="badge {{
                            getClassBasedOnOutcome(leads.outcome)
                          }}"
                        >
                        {{leads.outcome}}</span>
                      </td>                                                                                                                                                                                                                                                                                                                        
                     
                      <td style="text-align: left; margin-left: -5px;">
                        
                        <button [disabled]="leads.status_lead == 1" [routerLink]="['/assign-appmt/add', leads.lead_id]" class="p-button p-button-rounded p-button-warning"><i class="mdi mdi-notebook-plus"></i></button> &nbsp;
                        <button [routerLink]="['/leads/details', leads.lead_id]" class="p-button p-button-rounded p-button-view"><i class="mdi mdi-eye"></i></button>
                      </td>
                  </tr>
                  
              </ng-template>
              <ng-template pTemplate="emptymessage">
                <tr>
                  <td colspan="8">No leads found.</td>
                </tr>
              </ng-template>
            </p-table>
            <ng-template #contentDelete let-c="close" let-d="dismiss">
              <div class="modal-header">
                <h4 class="modal-title" id="modal-basic-title">Confirmation</h4>
              </div>
              <div class="modal-body">
                <p>Are you sure to delete the lead</p>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-outline-dark" (click)="d('Cross click')">Cancel</button>
                <button type="button" class="btn btn-outline-dark" (click)="c('yes')">Yes</button>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>